# Electron ç‰ˆæœ¬ç®¡ç†

> è¯¦ç»†æŸ¥çœ‹æˆ‘ä»¬çš„ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥å’Œå®ç°ã€‚

åœ¨ 2.0.0.0ç‰ˆæœ¬ï¼ŒElectron è·Ÿéš [semver](#semver)ã€‚ ä»¥ä¸‹å‘½ä»¤å°†å®‰è£…æœ€æ–°ç¨³å®šçš„ Electron ç‰ˆæœ¬ï¼š

```sh
npm install --save-dev electron
```

ç°æœ‰é¡¹ç›®æ›´æ–°åˆ°æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬:

```sh
npm install --save-dev electron@latest
```

## ç‰ˆæœ¬1.x

Electron versions *< 2.0* did not conform to the [semver](https://semver.org) spec: major versions corresponded to end-user API changes, minor versions corresponded to Chromium major releases, and patch versions corresponded to new features and bug fixes. è™½ç„¶æ–¹ä¾¿å¼€å‘äººå‘˜åˆå¹¶åŠŸèƒ½ï¼Œä½†å´ä¸ºé¢å‘å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„å¼€å‘äººå‘˜å¸¦æ¥äº†éº»çƒ¦ã€‚ åƒSlackï¼ŒStrideï¼ŒTeamsï¼ŒSkypeï¼ŒVS Codeï¼ŒAtomå’ŒDesktopç­‰ä¸»è¦åº”ç”¨ç¨‹åºçš„QAæµ‹è¯•å‘¨æœŸå¯èƒ½å¾ˆé•¿ï¼Œç¨³å®šæ€§æ˜¯ä¸€ä¸ªéå¸¸ç†æƒ³çš„ç»“æœã€‚ å°è¯•å¸æ”¶é”™è¯¯ä¿®å¤æ—¶ï¼Œé‡‡ç”¨æ–°åŠŸèƒ½çš„é£é™©å¾ˆé«˜ã€‚

ä»¥ä¸‹æ˜¯ 1.x ç­–ç•¥çš„ä¸€ä¸ªä¾‹å­ï¼š

![](../images/versioning-sketch-0.png)

ä½¿ç”¨ `1.8.1`å¼€å‘çš„åº”ç”¨ç¨‹åºæ— æ³•å¸æ”¶ `1.8.2 ` çš„åŠŸèƒ½ï¼Œæˆ–è€…é€šè¿‡åå‘ç§»æ¤ä¿®å¤å’Œç»´æŠ¤æ–°çš„å‘è¡Œç‰ˆï¼Œæ— æ³•é‡‡ç”¨ `1.8.3`é”™è¯¯ä¿®å¤ã€‚

## ç‰ˆæœ¬ 2.0 å’Œä¹‹åç‰ˆæœ¬

æˆ‘ä»¬çš„1.xæˆ˜ç•¥æœ‰ä»¥ä¸‹å‡ é¡¹é‡å¤§å˜åŒ–ã€‚ æ¯æ¬¡æ›´æ”¹éƒ½æ˜¯ä¸ºäº†æ»¡è¶³å¼€å‘è€…/ç»´æŠ¤è€…å’Œåº”ç”¨å¼€å‘è€…çš„éœ€è¦å’Œä¼˜å…ˆäº‹é¡¹ã€‚

1. ä¸¥æ ¼ä½¿ç”¨ semver
2. å¼•å…¥ç¬¦åˆ semver çš„ `-beta` æ ‡ç­¾
3. å¼•å…¥[å¸¸è§„æäº¤æ¶ˆæ¯](https://conventionalcommits.org/)
4. æ˜ç¡®å®šä¹‰çš„ç¨³å®šåˆ†æ”¯
5. `master`åˆ†æ”¯æ²¡æœ‰ç‰ˆæœ¬ä¿¡æ¯ï¼Œåªæœ‰ç¨³å®šåˆ†æ”¯ä¼šåŒ…å«ç‰ˆæœ¬ä¿¡æ¯ã€‚

æˆ‘ä»¬å°†è¯¦ç»†ä»‹ç» git åˆ†æ”¯æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œnpm æ ‡è®°æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¼€å‘äººå‘˜åº”è¯¥çœ‹åˆ°ä»€ä¹ˆï¼Œä»¥åŠå¦‚ä½•èƒ½å¤Ÿæ”¯æŒæ›´æ”¹ã€‚

# semver

ä» 2.0 å¼€å§‹ï¼ŒElectron å°†éµå¾ª semverã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªè¡¨æ ¼ï¼Œæ˜ç¡®åœ°å°†å˜åŒ–çš„ç±»å‹æ˜ å°„åˆ°å®ƒä»¬å¯¹åº”çš„ semver ç±»åˆ« (ä¾‹å¦‚Majorï¼ŒMinorï¼ŒPatch)ã€‚

| Major ç‰ˆæœ¬å¢é‡          | Minor ç‰ˆæœ¬å¢é‡           | Patch ç‰ˆæœ¬å¢é‡         |
| ------------------- | -------------------- | ------------------ |
| Electron çªç ´æ€§ API å˜æ›´ | Electron æ— çªç ´æ€§ API å˜æ›´ | Electron bug ä¿®å¤    |
| Node.js é‡å¤§ç‰ˆæœ¬æ›´æ–°      | Node.js æ¬¡è¦ç‰ˆæœ¬æ›´æ–°       | Node.js patch ç‰ˆæœ¬æ›´æ–° |
| Chromium ç‰ˆæœ¬æ›´æ–°       |                      | ä¿®å¤ç›¸å…³çš„ chromium è¡¥ä¸  |

è¯·æ³¨æ„ï¼Œå¤§å¤šæ•°Chromiumæ›´æ–°éƒ½å°†è¢«è®¤ä¸ºæ˜¯åˆ†è§£çš„ã€‚ å¯ä»¥è¿”å›çš„ä¿®å¤å¾ˆå¯èƒ½ä¼šè¢«ç²¾é€‰ä¸ºè¡¥ä¸ã€‚

# ç¨³å®šåˆ†æ”¯

ç¨³å®šåˆ†æ”¯æ˜¯ä¸ä¸»å­å¹³è¡Œçš„åˆ†æ”¯ï¼Œåªæ˜¯åœ¨æŒ‘é€‰çš„ä¸å®‰å…¨æˆ–ç¨³å®šæœ‰å…³çš„ç²¾é€‰æ‰¿è¯ºä¸­ã€‚ è¿™äº›åˆ†æ”¯æ°¸è¿œä¸ä¼šè¢«åˆå¹¶ä¸ºä¸»äºº.

![](../images/versioning-sketch-1.png)

æ—¢ç„¶Electron 8, ç¨³å®šåˆ†æ”¯æ€»æ˜¯ **ä¸ªä¸»è¦ç‰ˆæœ¬è¡Œ** å¹¶æ ¹æ®ä»¥ä¸‹æ¨¡æ¿ `$MAJOR-x-y` eå‘½åã€‚ ã€‚ `8-x-y`  åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ **ä¸ªæ¬¡è¦çš„** ç‰ˆæœ¬è¡Œï¼Œå¹¶å°†å®ƒä»¬å‘½åä¸º `$MAJOR-$MINOR-x` ä¾‹å¦‚ï¼š `2-0-x`

æˆ‘ä»¬å…è®¸åŒæ—¶å­˜åœ¨å¤šä¸ªç¨³å®šåˆ†æ”¯ï¼Œå¹¶ä¸”æ‰“ç®—åœ¨ä»»ä½•æ—¶å€™è‡³å°‘æ”¯æŒä¸¤ä¸ªå¹¶è¡Œæ”¯æŒå®‰å…¨ä¿®å¤ã€‚ ![](../images/versioning-sketch-2.png)

GitHubä¸æ”¯æŒæ—§çº¿è·¯ï¼Œä½†æ˜¯å…¶ä»–åˆ†ç»„å¯ä»¥è‡ªè¡Œè·å–æ‰€æœ‰æƒå’Œè¿”å›ç¨³å®šæ€§å’Œå®‰å…¨ä¿®å¤ã€‚ æˆ‘ä»¬ä¸é¼“åŠ±è¿™æ ·åšï¼Œä½†æ˜¯è®¤è¯†åˆ°å®ƒä½¿å¾—è®¸å¤šåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜çš„ç”Ÿæ´»æ›´è½»æ¾ã€‚

# æµ‹è¯•ç‰ˆå’Œ Bug ä¿®å¤

å¼€å‘äººå‘˜æƒ³çŸ¥é“å“ªä¸ªç‰ˆæœ¬å¯ä»¥ _å®‰å…¨_ ä½¿ç”¨ã€‚ å³ä½¿æ˜¯ç®€å•çš„åŠŸèƒ½ä¹Ÿä¼šä½¿åº”ç”¨ç¨‹åºå˜å¾—å¤æ‚ã€‚ åŒæ—¶ï¼Œé”å®šåˆ°ä¸€ä¸ªå›ºå®šçš„ç‰ˆæœ¬æ˜¯å¾ˆå±é™©çš„ï¼Œå› ä¸ºä½ å¿½ç•¥äº†è‡ªä½ çš„ç‰ˆæœ¬ä»¥æ¥å¯èƒ½å‡ºç°çš„å®‰å…¨è¡¥ä¸å’Œé”™è¯¯ä¿®å¤ã€‚ æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨ `package.json ` ä¸­å…è®¸ä»¥ä¸‹æ ‡å‡†çš„ semver èŒƒå›´:

* ä½¿ç”¨ ` ~ 2.0. 0 ` åªæ¥å—æ‚¨çš„ ` 2.0.0 ` ç‰ˆæœ¬çš„ç¨³å®šæ€§æˆ–å®‰å…¨æ€§ç›¸å…³çš„ä¿®å¤ç¨‹åºã€‚
* ä½¿ç”¨ ` ^ 2.0. 0 ` å¯å…è®¸ä¸ç ´åæ€§çš„ _ åˆç†ç¨³å®š _ åŠŸèƒ½ä»¥åŠå®‰å…¨æ€§å’Œ bug ä¿®å¤ã€‚

ç¬¬äºŒç‚¹é‡è¦çš„æ˜¯ä½¿ç”¨ `^` çš„åº”ç”¨ç¨‹åºä»ç„¶èƒ½å¤ŸæœŸæœ›åˆç†çš„ç¨³å®šæ€§æ°´å¹³ã€‚ ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œsemverå…è®¸ä¸€ä¸ª _pre-release æ ‡è¯†_ æ¥è¡¨ç¤ºä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬è¿˜ä¸ _å®‰å…¨_ æˆ– _ç¨³å®š_.

æ— è®ºä½ é€‰æ‹©ä»€ä¹ˆï¼Œä½ å°†å®šæœŸä¸å¾—ä¸åœ¨ `package.json` ä¸­æ‰“ç ´ç‰ˆæœ¬ï¼Œå› ä¸ºçªç ´æ€§å˜æ›´æ˜¯ Chromium çš„ä¸€ä¸ªå¸¸æ€ã€‚

è¿‡ç¨‹å¦‚ä¸‹:

1. æ‰€æœ‰æ–°çš„ä¸»è¦å’Œæ¬¡è¦çš„ç‰ˆæœ¬è¡Œéƒ½ä»¥ `beta çš„åˆ†å·é¢„å‘å¸ƒæ ‡ç­¾è¡¨ç¤ºçš„æµ‹è¯•ç³»åˆ—å¼€å¤´ã€‚`, ä¾‹å¦‚ `2.0.0-beta.1`ã€‚ åœ¨ç¬¬ä¸€æ¬¡æµ‹è¯•åï¼Œæµ‹è¯•ç‰ˆéšåçš„é‡Šæ”¾å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶ï¼š
    1. æ›´æ”¹æ˜¯è½åçš„ API å…¼å®¹ (å…è®¸åºŸå¼ƒ)
    2. å®ç°æˆ‘ä»¬ç¨³å®šçš„æ—¶é—´è¡¨çš„å±é™©å¿…é¡»æ˜¯ä½çš„ã€‚
2. å¦‚æœå…è®¸æ›´æ”¹éœ€è¦åœ¨é‡Šæ”¾æµ‹è¯•ç‰ˆä¹‹åè¿›è¡Œï¼Œåˆ™ä½¿ç”¨å¹¶å¢åŠ é¢„æ”¾æ ‡ç­¾ï¼Œä¾‹å¦‚`2.0.0-beta.2`ã€‚
3. å¦‚æœç‰¹å®šçš„betaç‰ˆæœ¬_é€šå¸¸è¢«è®¤ä¸º_æ˜¯ç¨³å®šçš„ï¼Œé‚£ä¹ˆå®ƒå°†ä½œä¸ºç¨³å®šç‰ˆæœ¬è¢«é‡æ–°å‘å¸ƒï¼Œåªæ”¹å˜ç‰ˆæœ¬ä¿¡æ¯ã€‚ä¾‹å¦‚.0ã€‚ ä¾‹å¦‚ `2.0.0-beta.1`. åœ¨ç¬¬ä¸€ä¸ªç¨³å®šä¹‹åï¼Œæ‰€æœ‰çš„å˜åŒ–éƒ½å¿…é¡»è½åå…¼å®¹çš„ bug æˆ–å®‰å…¨ä¿®å¤ã€‚
4. å¦‚æœæœªæ¥é”™è¯¯ä¿®å¤æˆ–å®‰å…¨è¡¥ä¸ä¸€æ—¦å‘å¸ƒç¨³å®šï¼Œå®ƒä»¬å°†è¢«åº”ç”¨ï¼Œå¹¶ä¸” _è¡¥ä¸_ ç‰ˆæœ¬è¢«å¢é‡ ï¼Œä¾‹å¦‚ `2.0.1`ã€‚

ç‰¹åˆ«åœ°ï¼Œä¸Šè¿°æ­¥éª¤æ„å‘³ç€ï¼š

1. å…è®¸åœ¨æµ‹è¯•å‘¨æœŸç¬¬ä¸‰å‘¨ä¹‹å‰è¿›è¡Œéæ‹†è§£-APIæ›´æ”¹ï¼Œå³ä½¿è¿™äº›æ›´æ”¹æœ‰å¯èƒ½é€ æˆé€‚åº¦çš„å‰¯æ•ˆæœ
2. æ¥å—ç‰¹å¾æ ‡è®°çš„æ›´æ”¹ï¼Œè¿™äº›æ›´æ”¹ä¸ä¼šæ”¹å˜ç°æœ‰çš„ä»£ç è·¯å¾„ã€‚åœ¨æµ‹è¯•å‘¨æœŸä¸­çš„å¤§å¤šæ•°ç‚¹éƒ½æ˜¯å¥½çš„ã€‚ ç”¨æˆ·å¯ä»¥åœ¨ä»–ä»¬çš„åº”ç”¨ä¸­æ˜ç¡®å¯ç”¨é‚£äº›æ ‡è®°ã€‚
3. ç¬¬ä¸‰å‘¨ä¹‹ååœ¨æµ‹è¯•å‘¨æœŸå†…æ¥çº³ä»»ä½•ç±»å‹çš„åŠŸèƒ½æ˜¯ ğŸ‘ æ²¡æœ‰å¾ˆå¥½çš„ç†ç”±ã€‚

å¯¹äºæ¯ä¸ªä¸»è¦å’Œæ¬¡è¦çš„é¢ è¦†ï¼Œä½ éƒ½åº”è¯¥åƒä»¥ä¸‹ç¤ºä¾‹ä¸€æ ·è¿›è¡Œæ“ä½œï¼š

```plaintext
2.0.0-beta.1
2.0.0-beta.2
2.0.0-beta.3
2.0.0
2.0.1
2.0.2
```

å›¾ç‰‡ä¸­çš„ç”Ÿå‘½å‘¨æœŸç¤ºä¾‹:

* åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å‘è¡Œåˆ†æ”¯ï¼ŒåŒ…æ‹¬æœ€æ–°çš„åŠŸèƒ½ã€‚ å®ƒå·²å‘å¸ƒä¸º `2.0.0-beta.1`ã€‚ ![](../images/versioning-sketch-3.png)
* Bug ä¿®å¤ä¼šè¢«å¯¼å…¥ä¸»ï¼Œå¯ä»¥è¿”å›å‘å¸ƒåˆ†æ”¯ã€‚ è¡¥ä¸å·²åº”ç”¨ï¼Œä¸€ä¸ªæ–°æµ‹è¯•ç‰ˆå·²å‘å¸ƒä¸º `2.0.0-beta.2`ã€‚ ![](../images/versioning-sketch-4.png)
* æµ‹è¯•ç‰ˆè¢«è®¤ä¸ºæ˜¯ _ ä¸€èˆ¬ç¨³å®š _ çš„, å®ƒåœ¨ ` 2.0.0 ` ä¸‹ä½œä¸ºé beta ç‰ˆæœ¬å†æ¬¡è¢«å‘å¸ƒã€‚ ![](../images/versioning-sketch-5.png)
* åæ¥ï¼Œæ­éœ²äº†é›¶å¤©çš„åˆ©ç”¨æƒ…å†µï¼Œå¹¶å¯¹å¤§å¸ˆé‡‡å–äº†è¡¥æ•‘æªæ–½ã€‚ æˆ‘ä»¬æ”¯æŒä¿®å¤ä¸º `2-0-x` è¡Œï¼Œå¹¶é‡Šæ”¾ `2.0.1`ã€‚ ![](../images/versioning-sketch-6.png)

å‡ ä¸ªä¸åŒçš„ semver èŒƒå›´å°†å¦‚ä½•æ¥æ”¶æ–°ç‰ˆæœ¬çš„ç¤ºä¾‹:

![](../images/versioning-sketch-7.png)

# ç¼ºå¤±çš„ç‰¹æ€§: alphaç‰ˆæœ¬

æˆ‘ä»¬çš„æˆ˜ç•¥æœ‰å‡ æ¬¡æƒè¡¡ï¼Œæˆ‘ä»¬ç°åœ¨è®¤ä¸ºè¿™æ˜¯é€‚å½“çš„ã€‚ æœ€é‡è¦çš„æ˜¯, æ–°çš„ä¸»åˆ†æ”¯ç‰¹æ€§å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½ä½œä¸ºç¨³å®šç‰ˆå‘å¸ƒã€‚ å¦‚æœä½ æƒ³ç«‹å³å°è¯•ä¸€ä¸ªæ–°çš„ç‰¹æ€§, ä½ å¿…é¡»è‡ªå·±ç¼–è¯‘Electron ã€‚

ä½œä¸ºæœªæ¥çš„è€ƒè™‘, æˆ‘ä»¬å¯ä»¥ä»‹ç»ä»¥ä¸‹ä¸€ç§æˆ–ä¸¤ç§æƒ…å†µ:

* å…·æœ‰æ¾æ•£ç¨³å®šæ€§é™åˆ¶çš„ alpha é‡Šæ”¾ç‰ˆ; ä¾‹å¦‚, å½“ç¨³å®šé€šé“åœ¨ _ alpha _ ä¸­æ—¶, å…è®¸æ¥çº³æ–°ç‰¹æ€§

# åŠŸèƒ½æ ‡å¿—

åŠŸèƒ½æ ‡å¿—æ˜¯ Chromium çš„ä¸€ç§å¸¸è§çš„åšæ³•, åœ¨ç½‘ç»œå¼€å‘ç”Ÿæ€ç³»ç»Ÿä¸­å¾—åˆ°äº†å¾ˆå¥½çš„ç¡®ç«‹ã€‚ åœ¨ Electron ç¯å¢ƒä¸­, åŠŸèƒ½æ ‡å¿—æˆ– ** è½¯åˆ†æ”¯ ** å¿…é¡»å…·æœ‰ä»¥ä¸‹å±æ€§:

* æ˜¯åœ¨è¿è¡Œæ—¶æˆ–ç”Ÿæˆæ—¶å¯ç”¨/ç¦ç”¨çš„ã€‚æˆ‘ä»¬ä¸æ”¯æŒè¯·æ±‚ä½œç”¨åŸŸåŠŸèƒ½æ ‡å¿—çš„æ¦‚å¿µ
* å®ƒå®Œå…¨ç»†åˆ†æ–°çš„å’Œæ—§çš„ä»£ç è·¯å¾„; é‡æ„æ—§ä»£ç ä»¥å…è®¸æ–°åŠŸèƒ½ _ è¿å _ åŠŸèƒ½æ ‡å¿—å†…å®¹
* åœ¨åˆå¹¶åŠŸèƒ½å, åŠŸèƒ½æ ‡å¿—æœ€ç»ˆå°†è¢«åˆ é™¤

# æäº¤è¯­ä¹‰

æˆ‘ä»¬åŠ›æ±‚åœ¨æ›´æ–°å’Œå‘å¸ƒè¿‡ç¨‹çš„å„ä¸ªå±‚é¢æé«˜æ¸…æ™°åº¦ã€‚ ä» ` 2.0.0 ` å¼€å§‹, æˆ‘ä»¬å°†è¦æ±‚éµå¾ª [ å¸¸è§„æäº¤ ](https://conventionalcommits.org/) è§„èŒƒçš„æ‹‰è¯·æ±‚, å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹:

* ä¼šå¯¼è‡´ semver **major** ç‰ˆæœ¬æ”¹å˜çš„æäº¤å¿…é¡»ä»¥`BREAKING CHANGE:`å¼€å¤´ã€‚
* æäº¤ä¼šå¯¼è‡´ semver **minor** å¿…é¡»ä»¥ `feat:` å¼€å¤´ã€‚
* æäº¤ä¼šå¯¼è‡´ semver ** patch ** å¿…é¡»ä»¥ ` fix:` å¼€å¤´ã€‚

* æˆ‘ä»¬å…è®¸ä¸¢å¼ƒæäº¤ï¼Œæ¡ä»¶æ˜¯è¢«ä¸¢å¼ƒçš„ä¿¡æ¯ç¬¦åˆä¸Šè¿°ä¿¡æ¯æ ¼å¼ã€‚
* åªè¦pull requesté‡ŒåŒ…å«æœ‰æ„ä¹‰çš„æ€»ç»“æ€§çš„ç‰ˆæœ¬è¯­ä¹‰æ¶ˆæ¯ï¼Œå³ä½¿å®ƒå…¶ä¸­çš„æŸäº›æäº¤æ¶ˆæ¯ä¸åŒ…å«ç‰ˆæœ¬è¯­ä¹‰å‰ç¼€ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„

# æ‰“äº†ç‰ˆæœ¬çš„ `ä¸»åˆ†æ”¯`

- The `master` åˆ†æ”¯å°†å§‹ç»ˆåœ¨å…¶ `package.json` ä¸­åŒ…å« `0.0.0-dev`.
- Release åˆ†æ”¯æ°¸è¿œä¸ä¼šåˆå¹¶å› master åˆ†æ”¯
- å‘å¸ƒåˆ†æ”¯ _åœ¨_ å…¶`package.json ` ä¸­åŒ…å«æ­£ç¡®çš„ç‰ˆæœ¬
- ä¸€æ—¦ä¸€ä¸ªä¸»è¦çš„é‡Šæ”¾åˆ†æ”¯è¢«åˆ‡å‰²ï¼Œä¸»å­å°±å¿…é¡»è¢«æ‰“ç¢ä¸ºä¸‹ä¸€ä¸ªå¤§å¸ˆã€‚  I.e. `master` is always versioned as the next theoretical release branch
