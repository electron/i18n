# Verwenden von clang-tidy für C++-Code

[`clang-tidy`](https://clang.llvm.org/extra/clang-tidy/) ist ein Tool, mit dem C/C+++/Objective-C-Code automatisch auf Stilverletzungen, -Fehler und Best Practices überprüft werden kann.

Die `clang-tidy` Integration von Electron wird als Linter-Skript bereitgestellt, das mit `npm run lint:clang-tidy`ausgeführt werden kann. Während `clang-tidy` Ihre Dateien auf der Festplatte überprüft, müssen Sie Electron erstellt haben, damit es weiß, welche Compilerflags verwendet wurden, verwendet wurden. Es gibt eine erforderliche Option für das Skript `--output-dir`, die dem Skript anteilt, aus welchem Buildverzeichnis die Kompilierungsinformationen . Eine typische Verwendung wäre: `npm run lint:clang-tiy --out-dir ../out/Testing`

Ohne Dateinamen werden alle C/C++/Objective-C-Dateien überprüft. Sie können eine Liste der zu überprüfenden Dateien bereitstellen, indem Sie die Dateinamen übergeben, nachdem die Optionen: `npm run lint:clang-tiy --out-dir ../out/Testing shell/browser/api/electron_api_app.cc`

Während `clang-tidy` eine [lange Liste](https://clang.llvm.org/extra/clang-tidy/checks/list.html) möglicher Prüfungen hat, sind in Electron standardmäßig nur wenige aktiviert. Im Moment hat Electron keine `.clang-tidy` Konfiguration, also werden `clang-tidy` die von Chromium bei `src/.clang-tidy` finden und die Prüfungen verwenden, die Chrom aktiviert hat. Sie können die Prüfungen ändern, indem Sie die Option `--checks=` verwenden. Dies wird direkt an `clang-tidy`weitergeleitet, daher finden Sie der Dokumentation. Platzhalter können verwendet werden, und Prüfungen können deaktiviert werden, indem ein `-`vorangegeben wird. Standardmäßig werden alle aufgeführten Prüfungen zu in `.clang-tidy`hinzugefügt, wenn Sie also die Prüfungen auf bestimmte beschränken möchten, sollten Sie zuerst alle Prüfungen ausschließen und dann das, was Sie möchten, hinzufügen, z. B. `--checks=-*,performance*`.

Das Ausführen `clang-tidy` ist ziemlich langsam - intern kompiliert es jede Datei und führt dann die Prüfungen aus, sodass es immer einen Faktor langsamer als die Kompilierung sein wird. Während Sie parallele Durchläufe verwenden können, um sie mit der Option `--jobs|-j` zu beschleunigen, verwendet `clang-tidy` auch viel Speicher während der Überprüfungen, sodass es leicht in Fehler ohne Arbeitsspeicher ausgeführt werden kann. Als solche ist die Standardanzahl der Aufträge eins.
