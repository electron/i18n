# Архітектура Програми Electron

Перед тим як ми зануримося в API Electron, нам необхідно обговорити два типи процесів наявних в Electron. Вони є фундаментально різні та важливі для розуміння.

## Головний та Рендерний процеси

В Electron, процес що запускає `main` скрипт в `package.json` називається __головним процесом__. Скрипт, що запускає головний процес, може відображати GUI створюючи веб сторінки. Застосунок Electron завжди має головний процес, і нічого більше.

Відтоді як Electron використовує Chromium для відображення веб-сторінок, багато процесна архітектура Chromium також використовується. Кожна веб-сторінка в Electron виконується через свій власний процес, який називається __процесом рендерингу__.

У нормальних браузерах, веб-сторінки зазвичай виконуються в тестових середовищах і не мають доступу до нативних ресурсів. Користувачі Electron, однак, мають змогу використовувати Node.js API на веб-сторінках, дозволяючи низькорівневу взаємодію з операційною системою.

### Різниця між Головним і Процесом рендерингу

Головний процес створює веб-сторінки, за допомогою створення екземплярів`BrowserWindow`. Кожен екземпляр `BrowserWindow` запускає веб-сторінку у власному процесі рендерингу. Коли екземляр `BrowserWindow` знищено, процес рендерингу буде зупинено.

Головний процес керує всіма веб-сторінками і відповідними процесами для їх рендерінгу. Кожний процес рендерінгу є ізольованим і стосується веб сторінки що в ньому запущена.

Виклик нативних API для GUI заборонений, оскільки керування нативними ресурсами на веб-сторінках є дуже небезпечним та може призвести то витоку ресурсів. Якщо вам потрібно виконувати GUI операції на веб-сторінці, процес рендерингу веб-сторінки повинен взаємодіяти з головним процесом та запитувати у останнього виконання таких операцій.

> #### Азія: спілкування між процесами
> 
> Для Electron ми маємо декілька способів спілкування між основними процесами та процесами рендерингу, наприклад, [`ipcRenderer`](../api/ipc-renderer.md) та [`ipcMain`](../api/ipc-main.md) modules для відправки повідомлень, і модуль [віддалено](../api/remote.md) для комунікації в стилі RPC. There is also an FAQ entry on [how to share data between web pages][share-data].

## Використання Electron API

Electron пропонує декілька API, котрі дозволяють вести розробку десктопних додатків і в основному процесі, і в процесі рендерингу. В обох процесах доступ до API Electron' можна отримати підключенням модуля:

```javascript
const electron = require('electron')
```

Всі API Electron призначені для процесу типу. Багато з них можуть бути використані лише в основному процесі, деякі з них є лише завдяки процесу рендерингу, деяким і тим самим. Документація для кожного окремого API стан, який можна використати з нього.

Вікно для Electron було створено наприклад за допомогою `BrowserWindow` класу. Воно доступне лише в головному процесі.

```javascript
// Це буде працювати в main process, але буде `undefined` в 
// renderer process:
const { BrowserWindow } = require('electron')

const win = new BrowserWindow()
```

Оскільки зв'язок між процесами можливий, процес рендерингу може викликати в основному процес виконання завдань. Electron постачається з модулем , що називається `пульт` , який надає API зазвичай доступний лише для основного процесу. Для того, щоб створити `BrowserWindow` з рендерингового процесу, ми будемо використовувати віддалений як середнього чоловіка:

```javascript
// Це буде працювати в процесі рендерингу, але будьте `undefined` в
// головному процесі:
const { remote } = require('electron')
const { BrowserWindow } = remote

const win = new BrowserWindow()
```

## Використання API Node.js

Electron розкриває повний доступ до Node.js як в основному, так і в процесі рендерингу . Це має два важливі наслідки:

1) Всі API доступні в Node.js доступні в Electron. Виклик наступного коду з додатка Electron:

```javascript
const fs = require('fs')

const root = fs.readdirSync('/')

// This will print all files at the root-level of the disk,
// either '/' or 'C:\'.
console.log(root)
```

Так як ви вже можете здогадатися, це має важливі наслідки для безпеки , якщо ви спробуєте завантажити віддалений вміст. You can find more information and guidance on loading remote content in our [security documentation][security].

2) Ви можете використовувати модулі Node.js у вашому додатку. Виберіть ваш улюблений npm модуль. npm пропонує найбільший в світі репозиторій з відкритим вихідним кодом коду - можливість використовувати добре визначений і тестований код, який раніше був зарезервований для серверних додатків є однією з ключових функцій Electron.

Як приклад, щоб використовувати офіційний AWS SDK в вашому застосунку, ви встановити його в якості залежності:

```sh
npm install --save aws-sdk
```

Тоді, у вашому додатку Electron, вимагають і використовуйте модуль, як якщо б ви створити програму Node.js:

```javascript
//Готове для використання S3 Client
const S3 = require('aws-sdk/clients/s3')
```

Є одна важлива застереження: Native Node. s модулей (тобто, модулі, для яких потрібно компілювати вихідний код, щоб його використовувати) будуть скомпільовані з Electron.

The vast majority of Node.js modules are _not_ native. Лише 400 з ~650 000 модулів є рідними. Проте якщо вам необхідні native modules, будь ласка гляньте [цей гайд про те як рекомпілювати їх для Electron][native-node].

[security]: ./security.md
[native-node]: ./using-native-node-modules.md
[share-data]: ../faq.md#how-to-share-data-between-web-pages
