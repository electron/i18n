---
title: Поддержка Silicon Apple
author: Маршалловый звук
date: '2020-10-15'
---

С Apple Silicon аппаратное обеспечение, выпускается позднее в этом году, как выглядит путь для того, чтобы приложение Electron запущено на новом оборудовании?

---

С выпуском Electron 11.0.0-beta. , команда Electron в настоящее время поставляет сборки Electron, которые работают на новом аппаратном обеспечении Apple Silicon, которое Apple планирует осуществлять доставку позднее в этом году. Вы можете получить последнюю бета-версию с `npm install electron@beta` или загрузить ее непосредственно с нашего сайта [релизов](https://electronjs.org/releases/stable).

## Как это работает?

Начиная с Electron 11, мы будем отправлять отдельные версии Electron для Intel Macs и Apple Silicon Mac. До этого изменения мы уже отправили два артефакта: `darwin-x64` и `mas-x64`, Последняя версия для Mac App Store совместимости. Теперь мы доставляем еще два артефакта: `darwin-arm64` и `mas-arm64`, которые являются Apple Silicon эквивалентами вышеупомянутых артефактов.

## Что мне нужно сделать?

Вам нужно будет отправить две версии приложения: одну для x64 (Intel Mac) и одну для arm64 (Apple Silicon). Хорошая новость заключается в том, что [`электронный упаковщик`](https://github.com/electron/electron-packager/), [`Электронное восстановление`](https://github.com/electron/electron-rebuild/) и [`Электронный ковка`](https://github.com/electron-userland/electron-forge/) уже поддерживает таргетинг `arm64` архитектуры. До тех пор, пока вы используете последние версии этих пакетов, ваше приложение должно работать безупречно после того, как вы обновите целевую архитектуру до `arm64`.

В будущем мы выпустим пакет, который позволит вам "объединить" ваши `arm64` и `x64` приложения в один универсальный двоичный файл, но стоит отметить, что этот двоичный файл _был бы огромным_ и, вероятно, не идеален для отправки пользователям.

## Потенциальные вопросы

### Родные модули

Находясь на новую архитектуру, вам нужно обновить несколько зависимостей, которые могут вызвать проблемы с сборкой. Минимальная версия определенных зависимостей включена ниже для вашей ссылки.

| Зависимость             | Требования к версии |
| ----------------------- | ------------------- |
| Xcode                   | `>=12.0.0`       |
| `узловый гип`           | `>=7.1.0`        |
| `пересборка электронов` | `>=1.12.0`       |
| `electron-packager`     | `>=15.1.0`       |

В результате этих требований к версии зависимостей, вам может потребоваться исправить/обновить некоторые родные модули.  Следует отметить, что в процессе обновления Xcode появится новая версия macOS SDK, , которые могут привести к сбоям сборки для ваших родных модулей.


## Как я могу протестировать?

В настоящее время приложения Apple Silicon работают только на аппаратном обеспечении Apple Silicon, которое не доступно в коммерческих целях во время написания этого блога. Если у вас есть [комплект перехода разработчика](https://developer.apple.com/programs/universal/), вы можете протестировать ваше приложение на этом. В противном случае вам придется дождаться выхода выпуска аппаратного обеспечения Apple Silicon для проверки работоспособности вашего приложения.

## Как насчет Rosetta 2?

Rosetta 2 - новейшая итерация Apple [Rosetta](https://en.wikipedia.org/wiki/Rosetta_(software)) технологии, , который позволяет запускать приложения x64 Intel на их новом оборудовании Apple Silicon. Хотя мы считаем, что приложения x64 Electron будут работать под Rosetta 2, есть некоторые важные вещи, которые нужно отметить (и причины, по которым стоит отправить родной двоичный arm64-файл).

* Эффективность вашего приложения значительно снизится. Electron / V8 использует компиляцию [JIT](https://en.wikipedia.org/wiki/Just-in-time_compilation) для JavaScript, и благодаря тому, как работает Rosetta, вы будете эффективно работать с JIT дважды (один раз в V8 и один раз в Rosetta).
* Вы теряете преимущества новой технологии в Apple Silicon, например, увеличение размера страницы памяти.
* Отметили ли мы что производительность **значительно снизится**?
