# إشعارات (Windows, Linux, macOS)

## النظرة عامة

جميع أنظمة التشغيل الثلاثة توفر وسائل للتطبيقات لإرسال إشعارات للمستخدم. تقنية عرض الإشعارات مختلفة للعمليتين الرئيسية و Renderer.

بالنسبة لعملية العارض ، يسمح إلكترون للمطورين بإرسال إشعارات مع [HTML5 Notification API](https://notifications.spec.whatwg.org/)، باستخدام الإشعارات الأصلية لنظام التشغيل قيد التشغيل حالياً لعرضها.

لإظهار الإشعارات في العملية الرئيسية، تحتاج إلى استخدام وحدة [الإشعارات](../api/notification.md).

## مثال

### إظهار الإشعارات في عملية العارض

على افتراض أن لديك تطبيق إلكترون عامل من [دليل البدء السريع](quick-start.md)، يضاف السطر التالي إلى فهرس `. ملف tml` قبل الإغلاق `</body>` علامة:

```html
<script src="renderer.js"></script>
```

وإضافة ملف `renderer.js`:

```js
تفعيل الإشعارات = الإشعارات الجديدة ('Title', {
  body: 'Notification from the Renderer process'
})

myNotification.onclick = () => {
  console.log('الإشعار بالنقر عليه')
}
```

بعد إطلاق طلب إلكترون، يجب أن ترى الإشعار:

![إشعار في عملية العارض](../images/notification-renderer.png)

إذا قمت بفتح وحدة التحكم ثم انقر فوق الإشعار، سترى رسالة التي تم إنشاؤها بعد تشغيل الحدث `على النقر`:

![رسالة أونانقر للإشعار](../images/message-notification-renderer.png)

### إظهار الإشعارات في العملية الرئيسية

بدءاً بتطبيق عمل من [دليل البداية السريعة](quick-start.md)، قم بتحديث ملف `main.js` بالأسطر التالية:

```js
const { Notification } = مطلوب('electron')

الدالة تظهر الإشعار () {
  الإشعارات الحالية = {
    title: 'Basic Notification',
    body: 'Notification from the Main process'
  }
  إشعار جديد (notification).show()
}

app.whenReady().then(createWindow).then(showNotification)
```

بعد إطلاق طلب إلكترون، يجب أن ترى الإشعار:

![الإخطار في العملية الرئيسية](../images/notification-main.png)

## معلومات إضافية

في حين أن البرمجة وتجربة المستخدم عبر أنظمة التشغيل متشابهة، هناك اختلافات دقيقة.

### Windows

* على Windows 10، يجب تثبيت اختصار للتطبيق الخاص بك مع [معرف نموذج المستخدم للتطبيق](https://msdn.microsoft.com/en-us/library/windows/desktop/dd378459(v=vs.85).aspx) إلى قائمة بدء التشغيل. هذا يمكن أن يكون قاتلاً أثناء التطوير، لذلك إضافة `node_modules\electron\dist\electron.exe` إلى قائمة البدء تقوم أيضًا بالخدعة . انتقل إلى الملف في المستكشف ، انقر بالزر الأيمن و 'ثبت لبدء القائمة'. ستحتاج بعد ذلك إلى إضافة السطر `app.setAppUserModelId(process.execPath)` إلى العملية الرئيسية الخاصة بك لمشاهدة الإشعارات.
* على Windows 8. و Windows 8، يجب تثبيت اختصار للتطبيق الخاص بك مع [مستخدم التطبيق معرف النموذج](https://msdn.microsoft.com/en-us/library/windows/desktop/dd378459(v=vs.85).aspx) على شاشة البدء. لاحظ مع ذلك ، أنه ليس من الضروري تثبيته على شاشة البداية.
* على Windows 7، تعمل الإخطارات عبر تنفيذ مخصص يشبه بصرياً البرنامج الأصلي على الأنظمة الأحدث.

يحاول إلكترون أتمتة العمل حول معرف نموذج المستخدم التطبيق. عندما يستخدم إلكترون جنبا إلى جنب مع إطار التثبيت والتحديث، [سيتم تعيين الاختصارات تلقائيًا بشكل صحيح](https://github.com/electron/windows-installer/blob/master/README.md#handling-squirrel-events). علاوة على ذلك، سيكتشف Electron أن Squirrel قد استخدم وسيتصل تلقائيا بـ `app.setAppUserModelId()` بالقيمة الصحيحة. أثناء التطوير، قد يكون لديك لاستدعاء [`app.setAppUserModelId()`](../api/app.md#appsetappusermodelidid-windows) بنفسك.

علاوة على ذلك، في Windows 8، الحد الأقصى لطول هيئة الإخطار هو 250 حرفاً، مع فريق ويندوز يوصي بالاحتفاظ بالإشعارات إلى 200 حرف. مع ذلك، تم إزالة هذا الحد في Windows 10، مع فريق Windows يطلب من المطورين أن يكونوا معقولين. محاولة إرسال كميات ضخمة من النص إلى API (آلاف الأحرف) قد تؤدي إلى عدم الاستقرار.

#### الإشعارات المتقدمة

تسمح الإصدارات اللاحقة من Windows بالإشعارات المتقدمة، مع قوالب مخصصة، صور، وعناصر مرنة أخرى. لإرسال هذه الإشعارات (إما من العملية الرئيسية أو من عملية العرض)، استخدم وحدة المستخدم [إلكترون - نوافذ الإخطارات](https://github.com/felixrieseberg/electron-windows-notifications)، الذي يستخدم إضافات العقدة الأصلية لإرسال `إشعار` و `إخطارات` الكائنات.

بينما الإشعارات بما في ذلك الأزرار تعمل مع `إلكترون - نوافذ الإخطارات`، معالجة الردود تتطلب استخدام [`الإشعارات الإلكترونية - النوافذ التفاعلية`](https://github.com/felixrieseberg/electron-windows-interactive-notifications)، الذي يساعد في تسجيل مكونات COM المطلوبة واتصال بـ تطبيق Electron الخاص بك مع بيانات المستخدم المدخلة.

#### ساعات هادئة/وضع العرض التقديمي

لكشف ما إذا كان مسموحا لك أو لا يسمح لك بإرسال إشعار، استخدم وحدة المستخدم [الإخطارات - الحالة](https://github.com/felixrieseberg/electron-notification-state).

هذا يسمح لك بأن تحدد مسبقاً ما إذا كان ويندوز سيقوم بصمت بإلقاء الإشعار بعيداً.

### نظام macOS

الإشعارات مباشرة على macOS، ولكن يجب أن تكون على علم بـ [المبادئ التوجيهية للواجهة البشرية لـ Apple فيما يتعلق بالإخطارات](https://developer.apple.com/macos/human-interface-guidelines/system-capabilities/notifications/).

لاحظ أن الإشعارات تقتصر على 256 بايت في الحجم وسيتم اختزالها إذا تجاوزت هذا الحد.

#### الإشعارات المتقدمة

تسمح الإصدارات اللاحقة من macOS بالإشعارات مع حقل الإدخال، مما يسمح للمستخدم بالرد بسرعة على الإشعار. من أجل إرسال إشعارات مع حقل الإدخال، استخدم وحدة المستخدم [مبلِّغ العقدة](https://github.com/CharlieHess/node-mac-notifier).

#### عدم الإزعاج / حالة الجلسة

لكشف ما إذا كان مسموحا لك أو لا يسمح لك بإرسال إشعار، استخدم وحدة المستخدم [حالة الإخطارات الإلكترونية](https://github.com/felixrieseberg/electron-notification-state).

هذا سيتيح لك أن تكتشف مسبقاً ما إذا كان سيتم عرض الإشعار أم لا.

### Linux

يتم إرسال الإشعارات باستخدام `libnoti` التي يمكن أن تظهر الإشعارات على بيئة سطح المكتب التي تتبع [إشعارات سطح المكتب مواصفات](https://developer.gnome.org/notification-spec/)، بما في ذلك القرفة، التنوير، الوحدة، GNOME، KDE.
