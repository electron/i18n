---
title: Node.js ネイティブアドオンと Electron 5.0
author: BinaryMuse
date: '2019-02-01'
---

Electron 5.0 でネイティブな Node.js アドオンを使用しようとして問題が発生している場合、 V8 の最新バージョンで動作するように更新する必要があるかもしれません。

---

## さようなら `v8::Handle</0> 、こんにちは <code>v8::Local`

2014 年、 V8 チームはローカルハンドルを `v8::Local` に置き換え、 `v8::Handle` を非推奨にしました。 Electron 5.0 は `v8::Handle` が削除されたバージョンの V8 を含んでいるため、それを使用しているネイティブ Node.js アドオンは Electron 5.0 で使用される前に更新する必要があります。

必要なコード変更は最小限ですが、未だ `v8::Handle` を使用している *すべての* ネイティブ Node モジュールは Electron 5.0 でのビルドに失敗するため、変更されなければなりません。 Node.js v12 はこの V8 の変更を含んでいるため、 `v8::Handle` を使用しているモジュールは次のバージョンの Node で動作するために *どのみち* 更新される必要があるでしょう。

## 私はネイティブアドオンをメンテナンスしていますが、どうすればいいですか？

あなたが Node.js 用のネイティブアドオンをメンテナンスしている場合、 `v8::Handle` が使われている場所がすべて `v8::Local` に置き換わっていることを確認してください。 前者は後者の別名に過ぎなかったので、この問題に対処するために他の変更を加える必要はありません。

また、 [N-API](https://nodejs.org/api/n-api.html) は、Node.js の一部として V8 とは別に管理され、基になる JavaScript エンジンの変更からネイティブアドオンを分離することを目的としています。 詳細については [Node.js ウェブサイト内の N-API ドキュメント](https://nodejs.org/api/n-api.html#n_api_n_api) を参照してください。

## ヘルプ! ネイティブアドオンを使用している私のアプリが動作しません!

アプリで Node.js 用のネイティブアドオンを使用していて、この問題のためにネイティブアドオンがビルドされない場合は、アドオンの作成者に問い合わせて、問題を解決する新しいバージョンがリリースされているかどうかを確認してください。 もしそうでなければ、著者に連絡を取る (または [プルリクエストを開く!](https://help.github.com/articles/about-pull-requests/) )  とよいでしょう。
