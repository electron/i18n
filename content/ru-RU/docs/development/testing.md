# Тестирование

Мы стремимся сохранить кодовое покрытие Electron высоким. We ask that all pull request not only pass all existing tests, but ideally also add new tests to cover changed code and new scenarios. https://crowdin.com/translate/electron/159/en-ru#13105.

Этот репозиторий поставляется с правилами linting как для JavaScript, так и для C- а также для единиц и интеграционных тестов. Чтобы узнать больше о стиле кодирования Electron , пожалуйста, [в стиле кодирования](coding-style.md) документа.

## Линтинг

Чтобы убедиться, что ваш JavaScript соответствует стилю Electron coding , запустите `npm run lint-js`, который будет работать `standard` как против самого Electron, так и против унитарных тестов. Если вы используете редактор с плагином / аддон системы, вы можете использовать один из многих [StandardJS аддоны][standard-addons] быть информированы о стиле кодирования нарушений, прежде чем когда-либо совершить их.

Чтобы запустить `standard` с параметрами, `npm run lint-js --` с последующими , которые вы хотите передать `standard`.

Чтобы убедиться, что ваш C- соответствует стилю кодирования Electron, запустите `npm run lint-cpp`, который запускает `cpplint` скрипт. Мы рекомендуем, вы используете `clang-format` и [к короткой учебной](clang-format.md).

В этом репозитории не так много Python, но он также регулируется правилами стиля кодирования. `npm run lint-py` проверят всех Python, используя `pylint` для этого.

## Унитарные тесты

Если вы не используете [build-tools](https://github.com/electron/build-tools), убедитесь, что это имя, которое вы настроили для вашей локальной сборки Electron, является одним из `Testing`, `Release`, `Default`, `Debug`, или вы установили `process.env.ELECTRON_OUT_DIR`. Без этих наборов Electron не сможет выполнить некоторые этапы предварительного тестирования.

Чтобы выработать все унитарные тесты, `npm run test`. Единица испытаний Electron (сюрприз!), которые можно найти в `spec` папке. Обратите внимание, что имеет свой `package.json` и что его зависимости, следовательно не определены в верхнем `package.json`.

Чтобы выработать только конкретные тесты, соответствующие шаблону, запустите тест `npm -
-g'PATTERN`, заменив `PATTERN` регексом, который соответствует тестам которые вы хотели бы запустить. В качестве примера: Если вы хотите запустить только IPC-тесты, вы будет работать `npm run test -- -g ipc`.

### Проверка на устройствах Windows 10

#### Дополнительные шаги для запуска удельного теста:

1. Визуальная студия 2019 должна быть установлена.
2. Головки узла должны быть составлены для вашей конфигурации.

   ```powershell
   ниндзя-C\Testing third_party-electron_node:headers
   ```

3. Electron.lib должен быть скопирован как node.lib.

   ```powershell
   cd из\Testing
   mkdir gen\node_headers\Release
   копия electron.lib gen\node_headers\Release\node.lib
   ```

#### Отсутствующие шрифты

[На некоторых устройства на Windows 10](https://docs.microsoft.com/en-us/typography/fonts/windows_10_font_list) может быть не установлен шрифт Meriyo, что может привести к провалу fallback теста. Для того чтобы установить шрифт Meiryo:

1. Нажмите кнопку Windows и найдите _Управление дополнительными функциями_.
2. Нажмите _Добавить функцию_.
3. Выберите _Японские дополнительные шрифты_ и нажмите _Установить_.

#### Измерения пикселей

Некоторые тесты, которые полагаются на точные измерения пикселей, могут неправильно работать устройствах с настройками экрана Hi-DPI из-за ошибок точности плавающей точки. Чтобы вывести эти тесты под корректно, убедитесь, что устройство настроено на 100% масштабирование.

Настройка масштабирования дисплея:

1. Нажмите клавишу Windows и _настройки_.
2. В _шкалы и_, убедитесь, что устройство настроено на 100%.

[standard-addons]: https://standardjs.com/#are-there-text-editor-plugins
