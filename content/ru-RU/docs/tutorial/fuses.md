# Электронные предохранители

> Функция времени упаковки переключается

## Что такое предохранители?

Для подмножества функций Electron имеет смысл отключить определенные функции для всего приложения.  Например, 99% приложений не используют `ELECTRON_RUN_AS_NODE`, эти приложения хотят иметь возможность отправить двоичный, который не в состоянии использовать эту функцию.  Мы также не хотим, чтобы потребители Electron строили Electron из источника, так как это одновременно и массовая техническая проблема, и имеет высокую стоимость как времени, так и денег.

Предохранители являются решением этой проблемы, на высоком уровне они являются "волшебные биты" в электронной двоичной, которые могут быть отражены при упаковке вашего electron приложение, чтобы / отключить определенные функции / ограничения.  Потому что они flipped на времени пакета прежде чем вы подписываете код ваше app OS будет ответственн для обеспечивать те биты не flipped назад через проверку подписания кода уровня OS (Gatekeeper / Locker App).

## Как перевернуть предохранители?

### Простой способ

Мы сделали удобный модуль для `@electron/fuses` сделать листать эти предохранители легко.  Ознакомьтесь с README этого модуля для получения более подробной информации об использовании и потенциальных случаях ошибок.

```js
требуют ('@electron/fuses').flipFuses (
  // Путь к электрону
  требуют ('электрон'),
  // Предохранители, чтобы перевернуть
  {
    runAsNode: false
  }
)
```

### Трудный путь

#### Быстрый глоссарий

* **предохранитель**: Последовательность байтов в бинарной electron используется для управления предохранителями
* **Sentinel**: статическая известная последовательность байтов, которые можно использовать для обнаружения предохранителя провода
* **предохранитель**: Формат / разрешенные значения для предохранителя провода

Вручную листать предохранители требует редактирования Электронного двоичного и изменения предохранителя провода, чтобы быть последовательность байтов, которые представляют состояние предохранителей вы хотите.

Где-то в двоичном Electron будет последовательность байтов, которые выглядят так:

```text
| ... двоичные | sentinel_bytes | fuse_version | fuse_wire_length | fuse_wire | ... двоичные |
```

* `sentinel_bytes` всегда именно эта строка `dL7pKGdnNz796PbbjQWNKmHXBZaB9tsX`
* `fuse_version` представляет собой единый тотализатор, чье неподписаное целое значение представляет собой версию схемы предохранителя
* `fuse_wire_length` представляет собой единый ряд, чье неподписаное целое значение представляет собой количество предохранителей в следующем предохранителе провода
* `fuse_wire` представляет собой последовательность N байтов, каждый байт представляет собой единый предохранитель и его состояние.
  * "0" (0x30) указывает на то, что предохранитель отключен
  * "1" (0x31) означает, что предохранитель включен
  * "r" (0x72) указывает на то, что предохранитель был удален, и изменение времени на 1 или 0 не будет иметь никакого эффекта.

Чтобы перевернуть предохранитель, вы найдете его положение в предохранителе провода и изменить его на "0" или "1" в зависимости от состояния вы хотите.

Вы можете просмотреть текущую схему [здесь](https://github.com/electron/electron/blob/master/build/fuses/fuses.json).
