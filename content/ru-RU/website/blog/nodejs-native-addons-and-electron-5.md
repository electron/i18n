---
title: Node.js Native Addons и Electron 5.0
author: BinaryMuse
date: '2019-02-01'
---

Если у вас возникли проблемы с использованием родного дополнения Node.js с Electron 5. , есть шанс, что она должна быть обновлена для работы с самой последней версией V8.

---

## Прощай `v8::Handle`, Здравствуй, `v8::Local`

В 2014 году команда V8 устарела `v8::Handle` в пользу `v8::Local` для локальных обработчиков. Electron 5.0 включает в себя версию V8, которая наконец удалила `v8::Handle` для хорошего и родного узла. , которые все еще используют его, необходимо будет обновить, прежде чем они могут быть использованы с Electron 5.0.

Необходимое изменение кода минимальное, но *каждый* родной модуль узла, который все еще использует `v8::Handle` не сможет собрать с Electron 5. и должны быть изменены. Хорошей новостью является тот узел. s v12 также будет включать это изменение V8, чтобы все модули, использующие `v8::Handle` , в любом случае должны быть обновлены ** для работы с предстоящей версией узла.

## Я поддерживаю родной аддон, как я могу помочь?

Если вы поддерживаете собственное аддон для Node.js, убедитесь, что вы заменили все вхождения в `v8::Handle` на `v8::Local`. Первое из них было просто псевдонимом последнего, поэтому для решения этого конкретного вопроса не нужно вносить никаких других изменений.

Вам также может быть интересно ознакомиться с [N-API](https://nodejs.org/api/n-api.html), который поддерживается отдельно от V8 как часть узла. , и стремится изолировать родные аддоны от изменений в базовом движке JavaScript. Вы можете найти дополнительную информацию [на N-API документации на сайте Node.js](https://nodejs.org/api/n-api.html#n_api_n_api).

## Помогите! Я использую родной аддон в моем приложении и он не будет работать!

Если вы потребляете родной аддон для узла. в вашем приложении и родной аддон не будет работать из-за этой проблемы, проверьте вместе с автором аддона, чтобы увидеть, выпустили ли ли они новую версию, которая исправляет проблему. Если нет, то заходите к автору (или [открываем Pull Request!](https://help.github.com/articles/about-pull-requests/)— это, скорее всего, ваша лучшая ставка.
